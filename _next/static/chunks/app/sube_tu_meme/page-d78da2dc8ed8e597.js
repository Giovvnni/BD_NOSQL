(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[736],{2804:(e,t,a)=>{Promise.resolve().then(a.bind(a,9512))},9512:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var l=a(7437),r=a(2265);let s=()=>{let[e,t]=(0,r.useState)(null),[a,s]=(0,r.useState)(null),[o,n]=(0,r.useState)(""),[i,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),[m,h]=(0,r.useState)(!1),[g,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=localStorage.getItem("usuarioId");e?x(e):console.error("ID de usuario no encontrado")},[]);let p=()=>{t(null),s(null)},b=e=>{d(e),h(!0)},f=async a=>{if(a.preventDefault(),!e){b("Por favor, selecciona un archivo para subir.");return}if(!o){b("Por favor, selecciona una categor\xeda.");return}if(!i.trim()){b("Por favor, a\xf1ade al menos una etiqueta.");return}if(!g){b("No se ha encontrado el ID de usuario.");return}console.log("ID de usuario:",g);let l=new FormData;l.append("usuario_id",g),l.append("categoria",o),l.append("etiquetas",JSON.stringify(i.split(","))),l.append("archivo",e);try{let e=await fetch("http://localhost:8000/upload",{method:"POST",body:l});if(!e.ok){let t=await e.json();b(t.detail||"Error desconocido al subir el meme.");return}let a=await e.json();b(a.mensaje||"Meme subido exitosamente."),t(null),s(null),n(""),c("")}catch(e){b("Hubo un problema al conectarse con el servidor.")}};return(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-200 p-8",children:[(0,l.jsx)("h2",{className:"text-3xl font-bold mb-8",children:"Sube tu meme"}),(0,l.jsxs)("form",{onSubmit:f,className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-2xl",children:[(0,l.jsxs)("div",{className:"w-72 h-72 bg-gray-300 rounded-lg flex items-center justify-center cursor-pointer hover:bg-gray-400 relative",onClick:()=>{var t;e||null===(t=document.getElementById("fileInput"))||void 0===t||t.click()},children:[a?(0,l.jsx)("img",{src:a,alt:"Preview",className:"rounded-lg w-full h-full object-cover"}):(0,l.jsx)("span",{className:"text-gray-500",children:"Haz clic aqu\xed para cargar tu archivo"}),e&&(0,l.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),p()},className:"absolute top-2 right-2 text-gray-800 hover:text-black text-xl font-bold","aria-label":"Quitar archivo",children:"\xd7"})]}),(0,l.jsx)("input",{type:"file",accept:".gif,.jpg,.jpeg,.png",onChange:e=>{if(e.target.files&&e.target.files[0]){let a=e.target.files[0];t(a),s(URL.createObjectURL(a))}},className:"hidden",id:"fileInput"}),(0,l.jsxs)("div",{className:"flex flex-col space-y-4 w-full mt-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"category",className:"text-base font-medium",children:"Categor\xeda"}),(0,l.jsxs)("select",{id:"category",value:o,onChange:e=>n(e.target.value),className:"border rounded p-3 mt-2 w-full",children:[(0,l.jsx)("option",{value:"",children:"Selecciona categor\xeda"}),(0,l.jsx)("option",{value:"boomer",children:"Boomer"}),(0,l.jsx)("option",{value:"gatos",children:"Gatos"}),(0,l.jsx)("option",{value:"humor_negro",children:"Humor Negro"}),(0,l.jsx)("option",{value:"random",children:"Random"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"tags",className:"text-base font-medium",children:"Etiquetas"}),(0,l.jsx)("textarea",{id:"tags",placeholder:"Ej: #meme, #divertido, #gatos",value:i,onChange:e=>c(e.target.value),className:"border rounded p-3 mt-2 w-full resize-none"})]})]}),e&&(0,l.jsx)("button",{type:"submit",className:"mt-4 bg-blue-500 text-white p-3 rounded hover:bg-blue-600 w-full",children:"Subir"})]}),m&&(0,l.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[(0,l.jsx)("p",{className:"text-center text-gray-800",children:u}),(0,l.jsx)("button",{onClick:()=>{h(!1)},className:"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 w-full",children:"Cerrar"})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[130,215,744],()=>t(2804)),_N_E=e.O()}]);