(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{6311:(e,t,r)=>{Promise.resolve().then(r.bind(r,1193))},242:(e,t,r)=>{"use strict";r.d(t,{H:()=>o,a:()=>n});var a=r(7437),s=r(2265);let l=(0,s.createContext)(void 0),o=e=>{let{children:t}=e,[r,o]=(0,s.useState)(!1),[n,i]=(0,s.useState)(null),[u,c]=(0,s.useState)(null),d=()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("usuarioId");o(!!e),i(e),c(t)};return(0,s.useEffect)(()=>{d();let e=()=>d();return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),(0,a.jsx)(l.Provider,{value:{isAuthenticated:r,token:n,usuarioId:u,login:(e,t)=>{localStorage.setItem("token",e),localStorage.setItem("usuarioId",t),i(e),c(t),o(!0)},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("usuarioId"),i(null),c(null),o(!1)}},children:t})},n=()=>{let e=(0,s.useContext)(l);if(!e)throw Error("useAuth debe ser usado dentro de un AuthProvider");return e}},1193:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(7437),s=r(2265),l=r(7138),o=r(6463),n=r(242);let i=()=>{let e=(0,o.useRouter)(),{login:t}=(0,n.a)(),[r,i]=(0,s.useState)(""),[u,c]=(0,s.useState)(""),[d,m]=(0,s.useState)(!1),[g,h]=(0,s.useState)(null),[b,x]=(0,s.useState)(!1),f=async a=>{a.preventDefault(),h(null),x(!0);try{let a=await fetch("http://localhost:8000/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,contraseña:u})});if(a.ok){let r=await a.json();t(r.access_token,r.usuario_id),e.push("/")}else{let e=await a.json();h(401===a.status?"Usuario y/o contrase\xf1a incorrecta":e.detail||"Error desconocido en el inicio de sesi\xf3n")}}catch(e){console.error("Error al iniciar sesi\xf3n:",e),h("Error de conexi\xf3n al servidor")}finally{x(!1)}};return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 p-4",children:(0,a.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md w-full sm:w-96",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-8",children:"Iniciar Sesi\xf3n"}),(0,a.jsxs)("form",{onSubmit:f,children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Correo Electr\xf3nico"}),(0,a.jsx)("input",{type:"email",id:"email",value:r,onChange:e=>i(e.target.value),required:!0,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{className:"mb-6 relative",children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Contrase\xf1a"}),(0,a.jsx)("input",{type:d?"text":"password",id:"password",value:u,onChange:e=>c(e.target.value),required:!0,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,a.jsx)("button",{type:"button",onClick:()=>{m(e=>!e)},className:"absolute right-3 top-10 text-gray-500 hover:text-gray-700","aria-label":"Toggle password visibility",children:d?"\uD83D\uDE48":"\uD83D\uDC41️"})]}),g&&(0,a.jsx)("p",{className:"text-red-500 text-sm mb-4",children:g}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-blue-500 text-white p-3 rounded-md hover:bg-blue-600 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all ".concat(b?"opacity-50 cursor-not-allowed":""),disabled:b,children:b?"Cargando...":"Iniciar Sesi\xf3n"})]}),(0,a.jsxs)("p",{className:"mt-6 text-center text-sm text-gray-600",children:["\xbfNo tienes una cuenta?"," ",(0,a.jsx)(l.default,{href:"/registro",className:"text-blue-500 hover:underline",children:"Reg\xedstrate aqu\xed"})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[291,130,215,744],()=>t(6311)),_N_E=e.O()}]);