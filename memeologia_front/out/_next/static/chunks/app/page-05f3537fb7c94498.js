(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8148:(e,s,t)=>{Promise.resolve().then(t.bind(t,8212))},6463:(e,s,t)=>{"use strict";var r=t(1169);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})},8212:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var r=t(7437),o=t(2265),a=t(6463);let l=()=>{let[e,s]=(0,o.useState)([]),[t,l]=(0,o.useState)(1),n=(0,a.useRouter)(),[c,i]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async()=>{try{let e=await fetch("http://localhost:8000/memes?page=".concat(t,"&limit=20"));if(e.ok){let t=await e.json();s(t.reverse())}else console.error("Error al obtener los memes")}catch(e){console.error("Error de conexi\xf3n:",e)}})()},[t]);let d=async e=>{let t=localStorage.getItem("token");if(!t){n.push("/login");return}try{let r=await fetch("http://localhost:8000/like-meme/".concat(e),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});if(r.ok){let t=await r.json();s(s=>s.map(s=>s.id===e?{...s,likes:t.likes}:s))}else{let e=await r.json();console.error("Error al dar like al meme:",e.detail||"Error desconocido")}}catch(e){console.error("Error de conexi\xf3n:",e)}},m=async e=>{let t=localStorage.getItem("token");if(!t){n.push("/login");return}try{let r=await fetch("http://localhost:8000/memes/".concat(e,"/report"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});if(r.ok){let t=await r.json();s(s=>s.map(s=>s.id===e?{...s,reported_count:t.reported_count}:s)),i(!0)}else{let e=await r.json();console.error("Error al reportar el meme:",e.detail||"Error desconocido")}}catch(e){console.error("Error de conexi\xf3n:",e)}},u=e=>{l(e)};return(0,r.jsxs)("div",{className:"space-y-8 p-4",children:[e.map(e=>(0,r.jsxs)("div",{className:"relative flex flex-col bg-white rounded-lg shadow-md overflow-hidden",children:[(0,r.jsx)("div",{className:"text-center text-white py-4",children:(0,r.jsx)("img",{src:"/icons/user.png",alt:"Usuario",className:"w-12 h-12 rounded-full ml-5"})}),(0,r.jsx)("div",{className:"flex justify-center bg-gray-100 p-4 h-[400px]",children:(0,r.jsx)("img",{src:e.imageUrl,alt:"Meme",className:"w-full h-full object-contain rounded-lg"})}),(0,r.jsxs)("div",{className:"p-4 flex justify-between items-center",children:[(0,r.jsxs)("button",{onClick:()=>d(e.id),className:"focus:outline-none hover:bg-gray-300 px-4 py-2 rounded-lg flex items-center space-x-2",children:[(0,r.jsx)("img",{src:"/icons/like.png",alt:"Like",className:"w-6 h-6"}),(0,r.jsxs)("span",{className:"font-semibold",children:[e.likes," Me gusta"]})]}),(0,r.jsxs)("button",{onClick:()=>m(e.id),className:"focus:outline-none hover:bg-gray-300 px-4 py-2 rounded-lg flex items-center space-x-2",children:[(0,r.jsx)("img",{src:"/icons/report.png",alt:"Reportar",className:"w-7 h-7"}),(0,r.jsxs)("span",{className:"font-semibold",children:["Reportar ",e.reports>0&&"(".concat(e.reports,")")]})]})]})]},e.id)),(0,r.jsxs)("div",{className:"flex justify-center mt-4",children:[(0,r.jsx)("button",{onClick:()=>u(t-1),disabled:t<=1,className:"px-4 py-2 bg-gray-300 rounded-lg disabled:opacity-50",children:"Anterior"}),(0,r.jsx)("span",{className:"mx-4",children:"P\xe1gina ".concat(t)}),(0,r.jsx)("button",{onClick:()=>u(t+1),className:"px-4 py-2 bg-gray-300 rounded-lg",children:"Siguiente"})]}),c&&(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Meme Reportado Exitosamente"}),(0,r.jsx)("p",{className:"mt-4",children:"El meme ha sido reportado y ser\xe1 revisado."}),(0,r.jsx)("button",{onClick:()=>i(!1),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg",children:"Cerrar"})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[130,215,744],()=>s(8148)),_N_E=e.O()}]);